<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup • wastdr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">wastdr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analysis.html">Data analysis - Producing insight from WAStD</a>
    </li>
    <li>
      <a href="../articles/getting-wastd.html">Getting WAStD</a>
    </li>
    <li>
      <a href="../articles/setup.html">Setup</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dbca-wa/wastdr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Setup</h1>
                        <h4 class="author">Florian Mayer</h4>
            
            <h4 class="date">2018-10-02</h4>
          </div>

    
    
<div class="contents">
<div id="authentication" class="section level1">
<h1 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h1>
<p>This vignette explains how to authenticate to the WAStD API.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(wastdr)</code></pre></div>
<p>There are two audiences with two different authentication options.</p>
<p>The first audience, DBCA staff, has access to <a href="https://strandings.dpaw.wa.gov.au">WAStD</a>. On their profile page they will find their own API token.</p>
<p>The second audience, external collaborators, will be given a username and password. Using these credentials, they can access the <a href="https://strandings.dpaw.wa.gov.au/api/1/">WAStD API</a> both through their browser and from other software like <code>wastdr</code>.</p>
</div>
<div id="configure-credentials" class="section level1">
<h1 class="hasAnchor">
<a href="#configure-credentials" class="anchor"></a>Configure credentials</h1>
<p><code>wastdr::get_wastd()</code> accesses the <code>WAStD</code> API using:</p>
<ul>
<li>the API URL, and</li>
<li>an access token <strong>or</strong> a username / password.</li>
</ul>
<p>There are three ways to supply the required settings to <code>wastdr::get_wastd()</code>.</p>
<div id="per-function-call" class="section level2">
<h2 class="hasAnchor">
<a href="#per-function-call" class="anchor"></a>Per function call</h2>
<p>Firstly, they can be supplied directly to <code>wastdr::get_wastd()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr<span class="op">::</span><span class="kw">get_wastd</span>(<span class="st">'encounters'</span>, 
                  <span class="dt">api_token =</span> <span class="st">"asdfqwer1234"</span>)

wastdr<span class="op">::</span><span class="kw">get_wastd</span>(<span class="st">'encounters'</span>,
                  <span class="dt">api_un =</span> <span class="st">"my_usernname"</span>,
                  <span class="dt">api_pw =</span> <span class="st">"my_password"</span>)</code></pre></div>
<p>This method overrides any other settings, but leads to verbose code with confidential data (token or password) in plain text.</p>
</div>
<div id="per-session" class="section level2">
<h2 class="hasAnchor">
<a href="#per-session" class="anchor"></a>Per session</h2>
<p>If <code>api_*</code> settings are not provided, <code>wastdr::get_wastd</code> defaults to specifically named environment variables.</p>
<p>For convenience, <code>wastdr_setup</code> sets these environment variables, while <code>wastdr_settings</code> retrieves the currently set values.</p>
<p>If you are an employee of the Western Australian Department of Biodiversity, Conservation and Attractions (DBCA), formerly the Department of Parks and Wildlife, then you can find your valid WAStD API Token at <a href="https://strandings.dpaw.wa.gov.au/">WAStD</a> under “My Profile” and run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/wastdr/topics/wastdr_setup">wastdr_setup</a></span>(<span class="dt">api_token =</span> <span class="st">"c12345asdfqwer"</span>)</code></pre></div>
<p>If you are an external collaborator, you will have given a username and password to access the WAStD API.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/wastdr/topics/wastdr_setup">wastdr_setup</a></span>(<span class="dt">api_un =</span> <span class="st">"my_username"</span>, <span class="dt">api_pw =</span> <span class="st">"my_password"</span>)</code></pre></div>
<p>Review the settings with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/wastdr/topics/wastdr_settings">wastdr_settings</a></span>()</code></pre></div>
<p><code>wastdr_setup</code> defaults <code>api_url</code> to the currently only existing API url.</p>
<p>This method reduces verbosity, but still exposes sensitive data in the <code>wastdr_setup</code> call. The <code><a href="http://www.rdocumentation.org/packages/wastdr/topics/wastdr_settings">wastdr::wastdr_settings()</a></code> expire with the R session.</p>
</div>
<div id="per-machine" class="section level2">
<h2 class="hasAnchor">
<a href="#per-machine" class="anchor"></a>Per machine</h2>
<p>For a more permanent setup, the environment variables can be set in the user’s <code>.Rprofile</code>.</p>
<p>DBCA staff add to their <code>.Rprofile</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="dt">WASTDR_API_TOKEN=</span><span class="st">"Token c1234"</span>)</code></pre></div>
<p>Note that the API token contains the word <code>Token</code> and a whitespace in addition to the actual API token.</p>
<p>External collaborators add to their <code>.Rprofile</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="dt">WASTDR_API_UN=</span><span class="st">"my_username"</span>)
<span class="kw">Sys.setenv</span>(<span class="dt">WASTDR_API_PW=</span><span class="st">"my_password"</span>)</code></pre></div>
<p>In the long term, this last method is the most elegant and persistent way of configuring <code>wastdr</code>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#authentication">Authentication</a></li>
      <li>
<a href="#configure-credentials">Configure credentials</a><ul class="nav nav-pills nav-stacked">
<li><a href="#per-function-call">Per function call</a></li>
      <li><a href="#per-session">Per session</a></li>
      <li><a href="#per-machine">Per machine</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Florian W. Mayer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
