<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WA Sea Turtle Database 'WAStD' API Wrapper • wastdr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="WA Sea Turtle Database 'WAStD' API Wrapper">
<meta property="og:description" content="The 'WA Sea Turtle Database' 'WAStD' is a 'Django' web app with a 
    'RESTful' 'API' returning 'GeoJSON' 'FeatureCollections'. 
    'wastdr' provides helpers to retrieve data from the 'API', and to turn the 
    received 'GeoJSON' into R 'tibbles'. 'wastdr' will grow alongside 
    implemented use cases of retrieving and analysing 'WAStD' data.
    'wastdr' can be seen as working examples for converting nested lists into
    two-dimensional 'tibbles'.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">wastdr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/analysis.html">Data analysis - Producing insight from WAStD</a>
    </li>
    <li>
      <a href="articles/getting-wastd.html">Getting WAStD</a>
    </li>
    <li>
      <a href="articles/rsconnect/documents/analysis.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/setup.html">Setup</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dbca-wa/wastdr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    

<div id="wastdr-makes-wa-strandings-data-accessible-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#wastdr-makes-wa-strandings-data-accessible-in-r" class="anchor"></a>wastdr makes WA Strandings Data accessible in R</h1></div>
<p>The <a href="https://tsc.dbca.wa.gov.au/">WA Strandings Database WAStD</a> (<a href="https://github.com/dbca-wa/wastd/">github</a>) provides a <a href="https://tsc.dbca.wa.gov.au/api/1/">RESTful API</a>. WAStD contains data about turtle strandings, turtle taggings, turtle track and nest encounters, and some ancillary data (areas, surveys, staff). WAStD is accessible to authenticated staff of the WA Department of Parks &amp; Wildlife. The WAStD API uses token and basic authentication, see vignette on details.</p>
<p>The API returns GeoJSON, which can be loaded directly into any standard-compliant GIS environments, e.g. <a href="http://www.qgis.org/en/site/">Quantum GIS</a>.</p>
<p>If the data consumer however wishes to analyse data in a statistical package like R, the data need to be transformed from a nested list of lists (GeoJSON) into a two-dimensional tablular structure.</p>
<p>The main purpose of <code>wastdr</code> is to facilitate reading, parsing and using WAStD data by providing helpers to access the API and flatten the API outputs into a <a href="http://vita.had.co.nz/papers/tidy-data.html">tidy</a> <code><a href="http://dplyr.tidyverse.org/reference/reexports.html">dplyr::tibble</a></code>.</p>
<p>The secondary purpose of <code>wastdr</code> is to centralise a collection of commonly used analyses and visualisations of turtle data. As development progresses, example analyses and visualisationsn will be added to the vignette. Contributions and requests are welcome!</p>
<p>Lastly, to facilitate collaboration with external stakeholders, <code>wastdr</code> contains some anonymized example data (raw GeoJSON and parsed <code>tibble</code>) of turtle taggings, turtle track counts, and turtle nests.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install <code>wastdr</code> from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools::<span class="kw">install_github</span>(<span class="st">"dbca-wa/wastdr"</span>)</code></pre></div>
<p>While the WAStD API is only accessible to a selected audience, and <code>wastdr</code> is under active development, it is not feasible to release <code>wastdr</code> on CRAN yet. Therefore, <code>wastdr</code> will be distributed via GitHub for the time being.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p><code>wastdr</code> requires to be configured with the WAStD API URL and an access token or a username / password combination. <code>wastdr</code> functions expect these settings to be available as environment variables. For convenience, <code>wastdr_setup</code> sets the correct variables, while <code>wastdr_settings</code> retrieves the currently set values.</p>
<p>DBCA staff can find their WAStD API Token at <a href="https://tsc.dbca.wa.gov.au/">WAStD</a> under “My Profile” and run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr::<span class="kw"><a href="reference/wastdr_setup.html">wastdr_setup</a></span>(<span class="dt">api_token =</span> <span class="st">"c12345asdfqwer"</span>)</code></pre></div>
<p>External collaborator can use their allocated username and password:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr::<span class="kw"><a href="reference/wastdr_setup.html">wastdr_setup</a></span>(<span class="dt">api_un =</span> <span class="st">"my_username"</span>, <span class="dt">api_pw =</span> <span class="st">"my_password"</span>)</code></pre></div>
<p>Review the settings with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wastdr::<span class="kw"><a href="reference/wastdr_settings.html">wastdr_settings</a></span>()
<span class="co">#&gt; &lt;wastdr settings&gt;</span>
<span class="co">#&gt;   API URL:  https://tsc.dbca.wa.gov.au/api/1/ </span>
<span class="co">#&gt;   API Token:  Token c12345asdfqwer </span>
<span class="co">#&gt;   API Username:  my_username </span>
<span class="co">#&gt;   API Password:  my_password</span></code></pre></div>
<p>For a more permanent configuration method using environment variables please see the vignette “Setup”.</p>
</div>
<div id="get-wastd" class="section level2">
<h2 class="hasAnchor">
<a href="#get-wastd" class="anchor"></a>Get WAStD</h2>
<p>Once set up, <code>wastdr</code> can load data from WAStD simply with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tne &lt;-<span class="st"> </span><span class="kw">get_wastd</span>(<span class="st">"turtle-nest-encounters"</span>)
listviewer::<span class="kw">jsonedit</span>(tne)
nests &lt;-<span class="st"> </span><span class="kw"><a href="reference/parse_turtle_nest_encounters.html">parse_turtle_nest_encounters</a></span>(tne)</code></pre></div>
<p>Valid endpoints are listed in the base API URL of WAStD, e.g.:</p>
<ul>
<li><code>encounters</code></li>
<li><code>animal-encounters</code></li>
<li><code>turtle-nest-encounters</code></li>
<li><code>disturbance-observations</code></li>
</ul>
</div>
<div id="or-have-a-pickle" class="section level2">
<h2 class="hasAnchor">
<a href="#or-have-a-pickle" class="anchor"></a>…or have a pickle</h2>
<p>If you don’t have access to the WAStD API, you can still get a feel for the data by using the pickled example data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(wastdr)
<span class="co">#&gt; Loading required package: wastdr</span>

<span class="kw">data</span>(<span class="st">"animal_encounters"</span>)
<span class="kw">data</span>(<span class="st">"tne"</span>)

<span class="co"># listviewer::jsonedit(animal_encounters$content)</span>
<span class="co"># listviewer::jsonedit(tne$content)</span>

animals &lt;-<span class="st"> </span>wastdr::<span class="kw"><a href="reference/parse_animal_encounters.html">parse_animal_encounters</a></span>(animal_encounters)
tracks &lt;-<span class="st"> </span>wastdr::<span class="kw"><a href="reference/parse_turtle_nest_encounters.html">parse_turtle_nest_encounters</a></span>(tne)

<span class="co"># DT::datatable(animals)</span>
<span class="co"># DT::datatable(tracks)</span></code></pre></div>
</div>
<div id="learn-more" class="section level2">
<h2 class="hasAnchor">
<a href="#learn-more" class="anchor"></a>Learn more</h2>
<p>See the vignette for in-depth examples of transforming, analysing and visualising data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vignette</span>(<span class="st">"getting-wastd"</span>)
<span class="kw">vignette</span>(<span class="st">"analysis"</span>)</code></pre></div>
</div>
</div>
<div id="contribute" class="section level1">
<h1 class="hasAnchor">
<a href="#contribute" class="anchor"></a>Contribute</h1>
<p>Every contribution, constructive feedback, or suggestion is welcome!</p>
<p>Send us your ideas and requests as <a href="https://github.com/dbca-wa/wastdr/issues">issues</a> or submit a pull request.</p>
<p>Pull requests should eventually pass tests and checks (not introducing new ERRORs, WARNINGs or NOTEs apart from the “New CRAN package” NOTE):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
<span class="co"># devtools::install_github("hadley/devtools", force=T)</span>
<span class="co"># source("https://install-github.me/mangothecat/callr")</span>
<span class="co"># devtools::install_github("hadley/pkgdown")</span>
<span class="co"># devtools::install_github("klutometis/roxygen")</span>
styler:::<span class="kw">style_pkg</span>()
devtools::<span class="kw">document</span>(<span class="dt">roclets =</span> <span class="kw">c</span>(<span class="st">"rd"</span>, <span class="st">"collate"</span>, <span class="st">"namespace"</span>, <span class="st">"vignette"</span>))
devtools::<span class="kw">test</span>()
devtools::<span class="kw">check</span>(<span class="dt">check_version =</span> T, <span class="dt">force_suggests =</span> T, <span class="dt">args =</span> <span class="kw">c</span>(<span class="st">"--as-cran"</span>, <span class="st">"--timings"</span>))
covr::<span class="kw">codecov</span>(<span class="dt">token =</span> <span class="kw">Sys.getenv</span>(<span class="st">"CODECOV_TOKEN"</span>))
pkgdown::<span class="kw">build_news</span>()
pkgdown::<span class="kw">build_site</span>()</code></pre></div>
<p>To enable local testing of the API as well as checking and upload of test coverage, add these two lines with the respective tokens to your .Rprofile:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="dt">CODECOV_TOKEN =</span> <span class="st">"my-codecov-token"</span>)
<span class="kw">Sys.setenv</span>(<span class="dt">MY_API_TOKEN =</span> <span class="st">"my-api-token"</span>)</code></pre></div>
<p>The <code>wastdr</code> <a href="https://dbca-wa.github.io/wastdr/">webpage</a> is hosted on gh-pages and generated using <a href="https://github.com/hadley/pkgdown">pkgdown</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/dbca-wa/wastdr">https://​github.com/​dbca-wa/​wastdr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/dbca-wa/wastdr/issues">https://​github.com/​dbca-wa/​wastdr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Florian W. Mayer <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/dbca-wa/wastdr"><img src="https://travis-ci.org/dbca-wa/wastdr.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/dbca-wa/wastdr"><img src="https://codecov.io/gh/dbca-wa/wastdr/branch/master/graph/badge.svg" alt="Test coverage"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Florian W. Mayer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
